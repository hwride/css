<!DOCTYPE HTML>
<html lang="en-GB">
<head>
    <title>Width, height and margins</title>
    <link rel="stylesheet" type="text/css" href="../common.css">
    <link rel="stylesheet" type="text/css" href="../css-testing-component/css-testing-component.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <style>
        .yes {
            color: green;
        }
        .no {
            color: red;
        }
        td:first-child {
            white-space: nowrap;
        }
    </style>
</head>
<body>
<h1>Width, height and margins</h1>
<p class="example-description">
    Reference: <a href="https://www.w3.org/TR/CSS22/visudet.html">CSS 2.2 Visual formatting model details</a>
</p>
<ul>
    <li><a href="#block">Block</a>
        <ul>
            <li><a href="#block-width">Width and horizontal margins</a>
            <li><a href="#block-height">Height and vertical margins</a>
            <li><a href="#block-percent-width-height">Percentage width and height</a>
            <li><a href="#block-negative-margins">Negative margins</a>
            <li><a href="#block-special-width-height-keywords">Special width and height keywords</a>
        </ul>
    </li>
    <li><a href="#inline">Inline</a></li>
    <li><a href="#inline-block">Inline-block</a></li>
    <li><a href="#absolute">Absolute</a>
        <ul>
            <li><a href="#absolute-width">Width and horizontal margins</a>
            <li><a href="#absolute-height">Height and vertical margins</a>
        </ul>
    </li>
    <li><a href="#replaced">Replaced elements</a></li>
</ul>

<h2>Comparison of box model properties</h2>
<table>
    <thead>
    <tr>
        <th rowspan="2">Property</th>
        <th colspan="4">Supported values</th>
        <th rowspan="2">Can have negative value</th>
        <th rowspan="2">Initial value</th>
        <th rowspan="2">Percentages based on</th>
        <th rowspan="2">Other notes</th>
    </tr>
    <tr>
        <th><code>length</code></th>
        <th><code>&lt;percentage&gt;</code></th>
        <th><code>auto</code></th>
        <th>Other</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td><code>margin</code></td>
        <td class="yes">Yes</td>
        <td class="yes">Yes</td>
        <td class="yes">Yes</td>
        <td></td>
        <td class="yes">Yes</td>
        <td><code>0</code></td>
        <td style="white-space: nowrap">width of <a href="../containing-block/index.html">containing block</a></td>
        <td></td>
    </tr>
    <tr>
        <td><code>border-width</code></td>
        <td class="yes">Yes</td>
        <td class="no">No</td>
        <td class="no">No</td>
        <td><code>thin</code>, <code>medium</code>, <code>thick</code></td>
        <td class="no">No</td>
        <td><code>medium</code></td>
        <td>n/a</td>
        <td>If <code>border-style</code> is not set then <code>border-width</code> becomes 0.</td>
    </tr>
    <tr>
        <td><code>padding</code></td>
        <td class="yes">Yes</td>
        <td class="yes">Yes</td>
        <td class="no">No</td>
        <td></td>
        <td class="no">No</td>
        <td><code>0</code></td>
        <td>width of <a href="../containing-block/index.html">containing block</a></td>
        <td></td>
    </tr>
    <tr>
        <td>
            <code>width</code><br/>
            <code>height</code>
        </td>
        <td class="yes">Yes</td>
        <td class="yes">Yes</td>
        <td class="yes">Yes</td>
        <td></td>
        <td class="no">No</td>
        <td><code>auto</code></td>
        <td>width or height of <a href="../containing-block/index.html">containing block</a></td>
        <td><code>width</code> and <code>height</code> refers to the content area of an element, this is the area inside
            the padding (see <a href="../box-model/index.html">box model</a>).</td>
    </tr>
    <tr>
        <td><code>top</code><br /><code>right</code><br /><code>bottom</code><br /><code>left</code></td>
        <td class="yes">Yes</td>
        <td class="yes">Yes</td>
        <td class="yes">Yes</td>
        <td></td>
        <td class="yes">Yes</td>
        <td><code>auto</code></td>
        <td>width or height of <a href="../containing-block/index.html">containing block</a></td>
        <td></td>
    </tr>
    </tbody>
</table>

<div id="block">
    <h2>Block</h2>
    <p class="example-description">
        Block boxes can have a fixed or <code>auto</code> width and height. If <code>auto</code> horizontal
        properties will add up to the width on the <a href="../containing-block/index.html">containing block</a>, and
        height will wrap the block's contents. Details below:
    </p>

    <h3 id="block-width">Width and horizontal margins</h3>
    <p class="example-description">
        For block boxes width the equation that must be balanced is:
        <code>margin + border + padding + width = width of containing block</code>.
        This essentially happens by replacing <code>auto</code> values appropriately.
    </p>
    <div class="example-block-width"></div>

    <h3 id="block-height">Height and vertical margins</h3>
    <p class="example-description">
        Block boxes height can be set to a fixed height, or if <code>auto</code> will essentially be tall enough to
        wrap their content. There are slightly different wrapping rules that apply when <code>overflow</code> is not
        <code>visible</code> or has not been propagated to the viewport.
    </p>
    <div class="example-block-height"></div>

    <h3 id="block-negative-margins">Negative margins</h3>
    <p class="example-description">
        You can apply negative values to margins which will pull content the opposite way. The spec does not have a lot
        to say on negative margins with the main description being: <q>Negative values for margin properties are allowed,
        but there may be implementation-specific limits.</q>
    </p>
    <div class="example-block-negative-margins"></div>

    <h3 id="block-percent-width-height">Percentage width and height</h3>
    <p class="example-description">
        Width and height can be set using % values. They are a percentage of the width/height of the
        element's <a href="../containing-block/index.html">containing block</a>.
    </p>
    <p class="example-description">
        If the containing block has no explicitly specified <code>height</code> then the element's <code>height</code>
        changes to <code>auto</code>. This does not apply to <code>width</code>.
    </p>
    <div class="example-block-percent"></div>

    <h3 id="block-special-width-height-keywords">Special width and height keywords</h3>
    <p class="example-description">
        There are newer keywords that have been added to CSS that can be used with width and height, see below for
        examples.
    </p>
    <div class="example-block-special-width-height-keywords"></div>
</div>

<div id="inline">
    <h2>Inline</h2>
    <p class="example-description">
        The <code>width</code> and <code>height</code> properties don't  apply for inline boxes.
    </p>
    <p>
        Width is essentially shrink-to-fit.
        Horizontal <code>margin</code>, <code>border</code> and <code>padding</code> apply, though become zero if
        <code>auto</code>.
    </p>
    <p class="example-description">
        Height is determined by the element's font size.
        Vertical <code>border</code> and <code>padding</code> apply but they don't affect the size of lines so may
        overlap other lines. Vertical <code>margin</code> does not apply.
    </p>
    <div class="example-inline"></div>
</div>

<div id="inline-block">
    <h2>Inline block</h2>
    <p class="example-description">
        Inline-block elements are inline-level elements that can have a fixed <code>width</code>,
        <code>height</code>, <code>margin</code>, <code>padding</code> and <code>border</code> as block elements can.
    </p>
    <p class="example-description">
        If <code>width</code> is <code>auto</code> it will be shrink-to-fit.
    </p>
    <p class="example-description">
        If <code>height</code> is auto <code>auto</code> it will wrap children, as for block elements.
    </p>
    <div class="example-inline-block"></div>
</div>

<div id="absolute">
    <h2>Absolute</h2>
    <p class="example-description">
        Absolute positioned elements are removed from normal flow and positioned relative to their
        <a href="../containing-block/index.html">containing block</a> with the <code>top</code>, <code>bottom</code>,
        <code>left</code> and <code>right</code> properties.
    </p>

    <h3 id="absolute-width">Width and horizontal margins</h3>
    <p class="example-description">
        The <b>static position</b> is the position an element would have had if it had been laid out in normal flow.
    </p>
    <p class="example-description">
        The equation that must be balanced is:
        <code>left + margin + border + padding + width + right = width of static-position containing block</code>.
    </p>
    <p class="example-description">
        The following rules apply:
    </p>

    <ol>
        <li>If <code>left</code>, <code>right</code> or <code>width</code> are <code>auto</code>
            <ol>
                <li><code>auto</code> values for <code>margin-left</code> and <code>margin-right</code> become zero.</li>
                <li>If <code>width && (left || right)</code> are <code>auto</code> then
                    <code>width</code> becomes shrink-to-fit.</li>
                <li>If <code>left && right</code> are <code>auto</code> then <code>left</code>
                    (if <code>ltr</code>) gets set to the static position. <b>Note this is the default</b> as
                    <code>left</code>,<code>right</code>, and <code>width</code> all default to <code>auto</code>.</li>
                <li>The final <code>auto</code> gets set according to the equation. This can include becoming negative for
                    <code>left</code> or <code>right</code>. <code>width</code> sometimes stops at shrink-to-fit or
                    sometimes goes below depending on the browser.</li>
            </ol>
        </li>
        <li>Else
            <ol>
                <li>If both horizontal margins are <code>auto</code> they get assigned equal value to solve the equation.</li>
                <li>Unless this could make a margin negative, in which case <code>margin-left</code> (if <code>ltr</code>) is
                    set to zero and solve for right.</li>
                <li>If one margin is <code>auto</code> then solve for that margin.</li>
                <li>If the values are over-constrained <code>margin-right</code> (if <code>ltr</code>) becomes <code>auto</code>.</li>
            </ol>
        </li>
    </ol>
    <div class="example-absolute-width"></div>

    <h3 id="absolute-height">Height and vertical margins</h3>
    <p class="example-description">
        The logic for calculating the vertical properties of <code>absolute</code> elements is basically the same as
        for the the horizontal ones.
        </p>
    <p class="example-description">
        Specifically the equation is:
        <code>top + margin + border + padding + height + bottom = height of static-position containing block</code>.
    </p>
    <p class="example-description">
        The one difference from the horizontal examples is step 2.2 doesn't apply - the margins can both be negative
        and they will be made to balance as in step 2.1.
    </p>
    <div class="example-absolute-height"></div>
</div>

<div id="replaced">
    <h2>Replaced elements</h2>
    <p class="example-description">
        These are elements such as images whose formatting is outside the scope of CSS, see
        <a href="../visual-formatting-model/index.html#box-generation-terms-replaced">here</a> for more details.
        They can have an intrinsic height, weight and ratio. Essentially <code>auto</code> values are replaced to try
        and satisfy these intrinsic dimensions.
    </p>
    <p class="example-description">
        The rest of the calculations are basically as normal according to the box and position of that element.
    </p>
    <div class="example-replaced"></div>
</div>

<!-- Relative positioning: see 9.4.3 for values of left and right -->
</body>
<script src="../css-testing-component/lib/ace/src-noconflict/ace.js"></script>
<script src="../css-testing-component/css-testing-component.js"></script>
<script src="block.js"></script>
<script src="inline.js"></script>
<script src="inline-block.js"></script>
<script src="absolute.js"></script>
<script src="replaced.js"></script>
<script src="../nav.js"></script>
<script>createNav()</script>
</html>
